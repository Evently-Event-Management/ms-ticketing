{"timestamp":"2025-09-07T04:27:42.097Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T04:27:42.098Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T04:27:42.098Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":164}
{"timestamp":"2025-09-07T04:27:42.098Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":170}
{"timestamp":"2025-09-07T04:27:42.098Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":178}
{"timestamp":"2025-09-07T04:27:42.099Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":107}
{"timestamp":"2025-09-07T04:27:42.898Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":131}
{"timestamp":"2025-09-07T04:27:42.912Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful","file":"main.go","line":147}
{"timestamp":"2025-09-07T04:27:42.912Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":190}
{"timestamp":"2025-09-07T04:27:42.912Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":193}
{"timestamp":"2025-09-07T04:27:42.912Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":195}
{"timestamp":"2025-09-07T04:27:42.912Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":197}
{"timestamp":"2025-09-07T04:27:42.912Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":200}
{"timestamp":"2025-09-07T04:27:43.940Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":213}
{"timestamp":"2025-09-07T04:27:43.940Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":216}
{"timestamp":"2025-09-07T04:27:43.940Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":219}
{"timestamp":"2025-09-07T04:27:43.940Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T04:27:43.941Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T04:27:43.941Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":238}
{"timestamp":"2025-09-07T04:27:44.235Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":244}
{"timestamp":"2025-09-07T04:27:44.236Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":258}
{"timestamp":"2025-09-07T04:27:44.236Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":268}
{"timestamp":"2025-09-07T04:27:44.236Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":278}
{"timestamp":"2025-09-07T04:27:44.238Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":292}
{"timestamp":"2025-09-07T04:27:44.238Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":283}
{"timestamp":"2025-09-07T04:27:44.239Z","level":"FATAL","category":"HTTP","message":"HTTP server error: listen tcp :8084: bind: Only one usage of each socket address (protocol/network address/port) is normally permitted.","file":"main.go","line":285}
{"timestamp":"2025-09-07T04:29:32.120Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T04:29:32.120Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T04:29:32.120Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":164}
{"timestamp":"2025-09-07T04:29:32.120Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":170}
{"timestamp":"2025-09-07T04:29:32.120Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":178}
{"timestamp":"2025-09-07T04:29:32.120Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":107}
{"timestamp":"2025-09-07T04:29:33.021Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":131}
{"timestamp":"2025-09-07T04:29:33.028Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful","file":"main.go","line":147}
{"timestamp":"2025-09-07T04:29:33.028Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":190}
{"timestamp":"2025-09-07T04:29:33.028Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":193}
{"timestamp":"2025-09-07T04:29:33.029Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":195}
{"timestamp":"2025-09-07T04:29:33.029Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":197}
{"timestamp":"2025-09-07T04:29:33.029Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":200}
{"timestamp":"2025-09-07T04:29:34.049Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":213}
{"timestamp":"2025-09-07T04:29:34.049Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":216}
{"timestamp":"2025-09-07T04:29:34.049Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":219}
{"timestamp":"2025-09-07T04:29:34.049Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T04:29:34.049Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T04:29:34.049Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":238}
{"timestamp":"2025-09-07T04:29:34.378Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":244}
{"timestamp":"2025-09-07T04:29:34.378Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":258}
{"timestamp":"2025-09-07T04:29:34.378Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":268}
{"timestamp":"2025-09-07T04:29:34.379Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":278}
{"timestamp":"2025-09-07T04:29:34.380Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":283}
{"timestamp":"2025-09-07T04:29:34.380Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":292}
{"timestamp":"2025-09-07T04:30:10.536Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T04:30:10.536Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T04:30:10.536Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [bd96b92d-ff10-4710-a5c3-8422217e2f7e f197510c-a9ec-4bb7-9e51-55c2e9117164]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T04:30:10.537Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T04:30:10.539Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[bd96b92d-ff10-4710-a5c3-8422217e2f7e f197510c-a9ec-4bb7-9e51-55c2e9117164]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T04:30:10.539Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T04:30:10.635Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 4ec27128-067c-4a90-9b29-154177a584c3","file":"service.go","line":228}
{"timestamp":"2025-09-07T04:30:10.635Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T04:30:10.635Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8082/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T04:30:10.635Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"bd96b92d-ff10-4710-a5c3-8422217e2f7e\",\"f197510c-a9ec-4bb7-9e51-55c2e9117164\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T04:30:11.730Z","level":"ERROR","category":"SEAT_VALIDATION","message":"Seat validation failed: status 409","file":"service.go","line":271}
{"timestamp":"2025-09-07T04:30:11.730Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: seat validation failed: status 409","file":"handler.go","line":271}
{"timestamp":"2025-09-07T04:34:37.647Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":295}
{"timestamp":"2025-09-07T04:34:37.649Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":302}
{"timestamp":"2025-09-07T04:34:37.649Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":187}
{"timestamp":"2025-09-07T04:34:37.649Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":183}
{"timestamp":"2025-09-07T04:34:37.650Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T04:34:39.248Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T04:34:39.248Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T04:34:39.248Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":164}
{"timestamp":"2025-09-07T04:34:39.257Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":170}
{"timestamp":"2025-09-07T04:34:39.257Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":178}
{"timestamp":"2025-09-07T04:34:39.257Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":107}
{"timestamp":"2025-09-07T04:34:40.145Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":131}
{"timestamp":"2025-09-07T04:34:40.150Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful","file":"main.go","line":147}
{"timestamp":"2025-09-07T04:34:40.150Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":190}
{"timestamp":"2025-09-07T04:34:40.150Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":193}
{"timestamp":"2025-09-07T04:34:40.150Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":195}
{"timestamp":"2025-09-07T04:34:40.150Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":197}
{"timestamp":"2025-09-07T04:34:40.151Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":200}
{"timestamp":"2025-09-07T04:34:41.168Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":213}
{"timestamp":"2025-09-07T04:34:41.168Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":216}
{"timestamp":"2025-09-07T04:34:41.169Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":219}
{"timestamp":"2025-09-07T04:34:41.169Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T04:34:41.169Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T04:34:41.170Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":238}
{"timestamp":"2025-09-07T04:34:41.504Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":244}
{"timestamp":"2025-09-07T04:34:41.505Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":258}
{"timestamp":"2025-09-07T04:34:41.505Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":268}
{"timestamp":"2025-09-07T04:34:41.505Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":278}
{"timestamp":"2025-09-07T04:34:41.506Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":283}
{"timestamp":"2025-09-07T04:34:41.506Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":292}
{"timestamp":"2025-09-07T04:34:44.597Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T04:34:44.598Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T04:34:44.598Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [bd96b92d-ff10-4710-a5c3-8422217e2f7e f197510c-a9ec-4bb7-9e51-55c2e9117164]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T04:34:44.598Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T04:34:44.598Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[bd96b92d-ff10-4710-a5c3-8422217e2f7e f197510c-a9ec-4bb7-9e51-55c2e9117164]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T04:34:44.598Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T04:34:44.694Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 21f65e9e-0348-4eaf-85db-d5d0a342a853","file":"service.go","line":228}
{"timestamp":"2025-09-07T04:34:44.694Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T04:34:44.694Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T04:34:44.694Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"bd96b92d-ff10-4710-a5c3-8422217e2f7e\",\"f197510c-a9ec-4bb7-9e51-55c2e9117164\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T04:34:46.711Z","level":"ERROR","category":"SEAT_VALIDATION","message":"Seat validation failed: status 409","file":"service.go","line":271}
{"timestamp":"2025-09-07T04:34:46.711Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: seat validation failed: status 409","file":"handler.go","line":271}
{"timestamp":"2025-09-07T04:39:02.462Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T04:39:02.485Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T04:39:02.485Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [97fcd847-0780-4076-8ab9-04b07f74ef95 f197510c-a9ec-4bb7-9e51-55c2e9117164]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T04:39:02.486Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T04:39:02.486Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[97fcd847-0780-4076-8ab9-04b07f74ef95 f197510c-a9ec-4bb7-9e51-55c2e9117164]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T04:39:02.487Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T04:39:02.779Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 59777002-d237-4d9a-a10c-547c79120849","file":"service.go","line":228}
{"timestamp":"2025-09-07T04:39:02.779Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T04:39:02.779Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T04:39:02.779Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"97fcd847-0780-4076-8ab9-04b07f74ef95\",\"f197510c-a9ec-4bb7-9e51-55c2e9117164\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T04:39:02.813Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T04:39:02.813Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T04:39:05.901Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T04:39:05.901Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T04:39:05.938Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T04:39:05.939Z","level":"INFO","category":"ORDER","message":"Placing order: 59777002-d237-4d9a-a10c-547c79120849 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T04:39:05.939Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T04:39:06.044Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T04:39:07.082Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 59777002-d237-4d9a-a10c-547c79120849","file":"service.go","line":426}
{"timestamp":"2025-09-07T04:39:07.082Z","level":"INFO","category":"ORDER","message":"Order 59777002-d237-4d9a-a10c-547c79120849 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T04:39:07.082Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T04:39:07.184Z","level":"INFO","category":"TICKET","message":"Created ticket 012ea149-ef65-4b28-8c40-74ad46d6e4f1 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T04:39:07.293Z","level":"INFO","category":"TICKET","message":"Created ticket 6f639c44-3d9c-4b98-8327-3b4bac8c90f1 for seat f197510c-a9ec-4bb7-9e51-55c2e9117164","file":"service.go","line":383}
{"timestamp":"2025-09-07T04:39:07.383Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T04:39:07.383Z","level":"INFO","category":"ORDER","message":"Order 59777002-d237-4d9a-a10c-547c79120849 completed successfully for user 70073c30-1a6f-4768-b2ee-80d7ee9e6700","file":"service.go","line":405}
{"timestamp":"2025-09-07T04:39:07.383Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T04:39:31.481Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T04:39:31.507Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T04:39:31.507Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [6936e56f-95e7-4e32-9560-b94f1f778f33 07ffb8ad-d7e9-44cc-aae0-f2e82e3a4820]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T04:39:31.507Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T04:39:31.507Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[6936e56f-95e7-4e32-9560-b94f1f778f33 07ffb8ad-d7e9-44cc-aae0-f2e82e3a4820]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T04:39:31.507Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T04:39:31.615Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: f196375f-9ab6-4759-ad45-3beb2838cdd5","file":"service.go","line":228}
{"timestamp":"2025-09-07T04:39:31.615Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T04:39:31.615Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T04:39:31.615Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"6936e56f-95e7-4e32-9560-b94f1f778f33\",\"07ffb8ad-d7e9-44cc-aae0-f2e82e3a4820\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T04:39:31.661Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T04:39:31.662Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T04:39:33.675Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T04:39:33.675Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T04:39:33.706Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T04:39:33.706Z","level":"INFO","category":"ORDER","message":"Placing order: f196375f-9ab6-4759-ad45-3beb2838cdd5 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T04:39:33.707Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T04:39:33.798Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T04:39:34.800Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: f196375f-9ab6-4759-ad45-3beb2838cdd5","file":"service.go","line":426}
{"timestamp":"2025-09-07T04:39:34.800Z","level":"INFO","category":"ORDER","message":"Order f196375f-9ab6-4759-ad45-3beb2838cdd5 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T04:39:34.800Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T04:39:34.918Z","level":"INFO","category":"TICKET","message":"Created ticket a799aa42-fb54-4ea3-9336-925f3fb11160 for seat 6936e56f-95e7-4e32-9560-b94f1f778f33","file":"service.go","line":383}
{"timestamp":"2025-09-07T04:39:35.063Z","level":"INFO","category":"TICKET","message":"Created ticket 07d544a1-11a6-40c4-b4e9-0b3a275de8a1 for seat 07ffb8ad-d7e9-44cc-aae0-f2e82e3a4820","file":"service.go","line":383}
{"timestamp":"2025-09-07T04:39:35.144Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T04:39:35.144Z","level":"INFO","category":"ORDER","message":"Order f196375f-9ab6-4759-ad45-3beb2838cdd5 completed successfully for user 70073c30-1a6f-4768-b2ee-80d7ee9e6700","file":"service.go","line":405}
{"timestamp":"2025-09-07T04:39:35.144Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T04:40:27.086Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T04:40:27.115Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T04:40:27.115Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [6936e56f-95e7-4e32-9560-b94f1f778f33 07ffb8ad-d7e9-44cc-aae0-f2e82e3a4820]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T04:40:27.115Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T04:40:27.115Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[6936e56f-95e7-4e32-9560-b94f1f778f33 07ffb8ad-d7e9-44cc-aae0-f2e82e3a4820]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T04:40:27.115Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T04:40:27.223Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 11f788cd-d98c-4ed2-ba68-ab0f5ab99c5b","file":"service.go","line":228}
{"timestamp":"2025-09-07T04:40:27.223Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T04:40:27.223Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T04:40:27.223Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"6936e56f-95e7-4e32-9560-b94f1f778f33\",\"07ffb8ad-d7e9-44cc-aae0-f2e82e3a4820\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T04:40:27.262Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T04:40:27.262Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T04:40:27.263Z","level":"WARN","category":"REDIS","message":"One or more seats already locked","file":"service.go","line":285}
{"timestamp":"2025-09-07T04:40:27.263Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: one or more seats already locked","file":"handler.go","line":271}
{"timestamp":"2025-09-07T04:41:43.778Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T04:41:43.778Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T04:41:43.778Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [44085b11-1cc4-47e7-967e-c8d558c56771 fa85022d-f71b-4903-b2e5-e0329b82c490]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T04:41:43.778Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T04:41:43.778Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[44085b11-1cc4-47e7-967e-c8d558c56771 fa85022d-f71b-4903-b2e5-e0329b82c490]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T04:41:43.778Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T04:41:44.092Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: fc383fcd-0070-4e08-8cd2-b919264ec9d4","file":"service.go","line":228}
{"timestamp":"2025-09-07T04:41:44.092Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T04:41:44.092Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T04:41:44.092Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"44085b11-1cc4-47e7-967e-c8d558c56771\",\"fa85022d-f71b-4903-b2e5-e0329b82c490\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T04:41:44.123Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T04:41:44.123Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T04:41:46.130Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T04:41:46.130Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T04:41:46.159Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T04:41:46.159Z","level":"INFO","category":"ORDER","message":"Placing order: fc383fcd-0070-4e08-8cd2-b919264ec9d4 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T04:41:46.159Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T04:41:46.261Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T04:41:47.263Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: fc383fcd-0070-4e08-8cd2-b919264ec9d4","file":"service.go","line":426}
{"timestamp":"2025-09-07T04:41:47.263Z","level":"INFO","category":"ORDER","message":"Order fc383fcd-0070-4e08-8cd2-b919264ec9d4 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T04:41:47.264Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T04:41:47.371Z","level":"INFO","category":"TICKET","message":"Created ticket 2a687356-96c8-4e05-8173-53b25f05b408 for seat fa85022d-f71b-4903-b2e5-e0329b82c490","file":"service.go","line":383}
{"timestamp":"2025-09-07T04:41:47.466Z","level":"INFO","category":"TICKET","message":"Created ticket 5394421c-7099-46ff-ac90-50541790d6e7 for seat 44085b11-1cc4-47e7-967e-c8d558c56771","file":"service.go","line":383}
{"timestamp":"2025-09-07T04:41:47.546Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T04:41:47.546Z","level":"INFO","category":"ORDER","message":"Order fc383fcd-0070-4e08-8cd2-b919264ec9d4 completed successfully for user 70073c30-1a6f-4768-b2ee-80d7ee9e6700","file":"service.go","line":405}
{"timestamp":"2025-09-07T04:41:47.546Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T04:43:58.195Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":295}
{"timestamp":"2025-09-07T04:43:58.199Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":302}
{"timestamp":"2025-09-07T04:43:58.199Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":187}
{"timestamp":"2025-09-07T04:43:58.200Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":183}
{"timestamp":"2025-09-07T04:43:58.201Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T08:27:05.718Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T08:27:05.719Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T08:27:05.719Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":164}
{"timestamp":"2025-09-07T08:27:05.727Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":170}
{"timestamp":"2025-09-07T08:27:05.728Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":178}
{"timestamp":"2025-09-07T08:27:05.728Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":107}
{"timestamp":"2025-09-07T08:27:07.749Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":131}
{"timestamp":"2025-09-07T08:27:07.785Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful","file":"main.go","line":147}
{"timestamp":"2025-09-07T08:27:07.785Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":190}
{"timestamp":"2025-09-07T08:27:07.785Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":193}
{"timestamp":"2025-09-07T08:27:07.785Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":195}
{"timestamp":"2025-09-07T08:27:07.785Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":197}
{"timestamp":"2025-09-07T08:27:07.785Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":200}
{"timestamp":"2025-09-07T08:27:08.887Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":213}
{"timestamp":"2025-09-07T08:27:08.887Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":216}
{"timestamp":"2025-09-07T08:27:08.888Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":219}
{"timestamp":"2025-09-07T08:27:08.888Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T08:27:08.888Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T08:27:08.888Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":238}
{"timestamp":"2025-09-07T08:27:09.905Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":244}
{"timestamp":"2025-09-07T08:27:09.906Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":258}
{"timestamp":"2025-09-07T08:27:09.906Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":268}
{"timestamp":"2025-09-07T08:27:09.906Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":278}
{"timestamp":"2025-09-07T08:27:09.907Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":292}
{"timestamp":"2025-09-07T08:27:09.907Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":283}
{"timestamp":"2025-09-07T08:27:25.903Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T08:27:25.903Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T08:27:25.904Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [bd96b92d-ff10-4710-a5c3-8422217e2f7e f197510c-a9ec-4bb7-9e51-55c2e9117164]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T08:27:25.904Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T08:27:25.904Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[bd96b92d-ff10-4710-a5c3-8422217e2f7e f197510c-a9ec-4bb7-9e51-55c2e9117164]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T08:27:25.904Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T08:27:26.193Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 564c0ee2-61f4-4d2c-a837-292cb6c83beb","file":"service.go","line":228}
{"timestamp":"2025-09-07T08:27:26.193Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T08:27:26.193Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T08:27:26.193Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"bd96b92d-ff10-4710-a5c3-8422217e2f7e\",\"f197510c-a9ec-4bb7-9e51-55c2e9117164\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T08:27:27.223Z","level":"ERROR","category":"SEAT_VALIDATION","message":"Seat validation failed: status 409","file":"service.go","line":271}
{"timestamp":"2025-09-07T08:27:27.223Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: seat validation failed: status 409","file":"handler.go","line":271}
{"timestamp":"2025-09-07T08:28:35.191Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T08:28:35.200Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T08:28:35.201Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T08:28:35.201Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T08:28:35.201Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T08:28:35.201Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T08:28:35.443Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 530c3cba-5153-40cf-a147-ae1d4477163a","file":"service.go","line":228}
{"timestamp":"2025-09-07T08:28:35.444Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T08:28:35.444Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T08:28:35.444Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T08:28:35.500Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T08:28:35.500Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T08:28:38.537Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T08:28:38.537Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T08:28:38.572Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T08:28:38.573Z","level":"INFO","category":"ORDER","message":"Placing order: 530c3cba-5153-40cf-a147-ae1d4477163a for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T08:28:38.573Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T08:28:38.840Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T08:28:39.852Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 530c3cba-5153-40cf-a147-ae1d4477163a","file":"service.go","line":426}
{"timestamp":"2025-09-07T08:28:39.852Z","level":"INFO","category":"ORDER","message":"Order 530c3cba-5153-40cf-a147-ae1d4477163a placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T08:28:39.852Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T08:28:40.155Z","level":"INFO","category":"TICKET","message":"Created ticket 30ed74dc-3329-4609-8db3-462abd739423 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T08:28:40.422Z","level":"INFO","category":"TICKET","message":"Created ticket 1fde6fa4-e0a3-4e0b-a555-e0764459c80a for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T08:28:40.740Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T08:28:40.741Z","level":"INFO","category":"ORDER","message":"Order 530c3cba-5153-40cf-a147-ae1d4477163a completed successfully for user 70073c30-1a6f-4768-b2ee-80d7ee9e6700","file":"service.go","line":405}
{"timestamp":"2025-09-07T08:28:40.741Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T08:29:36.422Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T08:29:36.423Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T08:29:36.423Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T08:29:36.423Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T08:29:36.423Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T08:29:36.423Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T08:29:36.753Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: a20e56da-c735-48a0-97ef-1246e0f7e151","file":"service.go","line":228}
{"timestamp":"2025-09-07T08:29:36.753Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T08:29:36.753Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T08:29:36.753Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T08:29:36.810Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T08:29:36.811Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T08:29:36.811Z","level":"WARN","category":"REDIS","message":"One or more seats already locked","file":"service.go","line":285}
{"timestamp":"2025-09-07T08:29:36.811Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: one or more seats already locked","file":"handler.go","line":271}
{"timestamp":"2025-09-07T08:47:54.345Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T08:47:54.346Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T08:47:54.346Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T08:47:54.346Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T08:47:54.346Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T08:47:54.346Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T08:47:54.949Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 2cfc2025-a2c5-4327-bddf-9af112e5b0f2","file":"service.go","line":228}
{"timestamp":"2025-09-07T08:47:54.949Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T08:47:54.949Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T08:47:54.950Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T08:47:55.031Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T08:47:55.031Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T08:47:57.044Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T08:47:57.044Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T08:47:57.077Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T08:47:57.077Z","level":"INFO","category":"ORDER","message":"Placing order: 2cfc2025-a2c5-4327-bddf-9af112e5b0f2 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T08:47:57.077Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T08:47:57.320Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T08:47:58.325Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 2cfc2025-a2c5-4327-bddf-9af112e5b0f2","file":"service.go","line":426}
{"timestamp":"2025-09-07T08:47:58.325Z","level":"INFO","category":"ORDER","message":"Order 2cfc2025-a2c5-4327-bddf-9af112e5b0f2 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T08:47:58.325Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T08:47:58.564Z","level":"INFO","category":"TICKET","message":"Created ticket 86dd8e5c-48d2-43c1-bb7b-bb063f9576c3 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T08:47:58.806Z","level":"INFO","category":"TICKET","message":"Created ticket eb3b1c82-3090-4c56-b2c8-7c23e47cf45e for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T08:47:59.028Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T08:47:59.029Z","level":"INFO","category":"ORDER","message":"Order 2cfc2025-a2c5-4327-bddf-9af112e5b0f2 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T08:47:59.029Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T09:00:40.977Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:00:40.978Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:00:40.978Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:00:40.978Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:00:40.978Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:00:40.978Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:00:41.295Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 85d3d165-c578-4d9d-9b5e-b6426bca4513","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:00:41.296Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:00:41.296Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:00:41.296Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:00:41.352Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:00:41.352Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:00:43.364Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T09:00:43.364Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T09:00:43.394Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T09:00:43.395Z","level":"INFO","category":"ORDER","message":"Placing order: 85d3d165-c578-4d9d-9b5e-b6426bca4513 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T09:00:43.395Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T09:00:43.486Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T09:00:44.491Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 85d3d165-c578-4d9d-9b5e-b6426bca4513","file":"service.go","line":426}
{"timestamp":"2025-09-07T09:00:44.491Z","level":"INFO","category":"ORDER","message":"Order 85d3d165-c578-4d9d-9b5e-b6426bca4513 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T09:00:44.491Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T09:00:44.595Z","level":"INFO","category":"TICKET","message":"Created ticket 00cacfd5-b248-4ac4-889f-5fcea904ebd4 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:00:44.686Z","level":"INFO","category":"TICKET","message":"Created ticket 4b4d829d-cd93-49a5-a956-0fcc159e6f52 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:00:44.781Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T09:00:44.781Z","level":"INFO","category":"ORDER","message":"Order 85d3d165-c578-4d9d-9b5e-b6426bca4513 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T09:00:44.781Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T09:18:09.401Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:18:09.402Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:18:09.402Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:18:09.402Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:18:09.402Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:18:09.402Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:18:09.691Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: f994cb81-5e46-440f-a187-73545c8ab75f","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:18:09.691Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:18:09.691Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:18:09.691Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:18:09.751Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:18:09.751Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:18:11.767Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T09:18:11.767Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T09:18:11.803Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T09:18:11.803Z","level":"INFO","category":"ORDER","message":"Placing order: f994cb81-5e46-440f-a187-73545c8ab75f for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T09:18:11.804Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T09:18:11.904Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T09:18:12.909Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: f994cb81-5e46-440f-a187-73545c8ab75f","file":"service.go","line":426}
{"timestamp":"2025-09-07T09:18:12.910Z","level":"INFO","category":"ORDER","message":"Order f994cb81-5e46-440f-a187-73545c8ab75f placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T09:18:12.910Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T09:18:13.013Z","level":"INFO","category":"TICKET","message":"Created ticket f4d5620a-8f4b-4b8d-8208-2feed2b625e7 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:18:13.115Z","level":"INFO","category":"TICKET","message":"Created ticket eb597c11-558b-4f57-a5ed-c8843f2c80e7 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:18:13.199Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T09:18:13.199Z","level":"INFO","category":"ORDER","message":"Order f994cb81-5e46-440f-a187-73545c8ab75f completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T09:18:13.199Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T09:23:09.061Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":295}
{"timestamp":"2025-09-07T09:23:09.064Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":302}
{"timestamp":"2025-09-07T09:23:09.064Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":187}
{"timestamp":"2025-09-07T09:23:09.065Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":183}
{"timestamp":"2025-09-07T09:23:09.065Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T09:23:14.250Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T09:23:14.250Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T09:23:14.250Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":166}
{"timestamp":"2025-09-07T09:23:14.250Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":172}
{"timestamp":"2025-09-07T09:23:14.251Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":180}
{"timestamp":"2025-09-07T09:23:14.251Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":109}
{"timestamp":"2025-09-07T09:23:15.219Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":133}
{"timestamp":"2025-09-07T09:23:15.223Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful","file":"main.go","line":149}
{"timestamp":"2025-09-07T09:23:15.223Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":192}
{"timestamp":"2025-09-07T09:23:15.223Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":195}
{"timestamp":"2025-09-07T09:23:15.223Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":197}
{"timestamp":"2025-09-07T09:23:15.223Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":199}
{"timestamp":"2025-09-07T09:23:15.224Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":202}
{"timestamp":"2025-09-07T09:23:16.259Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":215}
{"timestamp":"2025-09-07T09:23:16.259Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":218}
{"timestamp":"2025-09-07T09:23:16.259Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":221}
{"timestamp":"2025-09-07T09:23:16.260Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T09:23:16.260Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T09:23:16.260Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":240}
{"timestamp":"2025-09-07T09:23:16.565Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":246}
{"timestamp":"2025-09-07T09:23:16.565Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":260}
{"timestamp":"2025-09-07T09:23:16.565Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":270}
{"timestamp":"2025-09-07T09:23:16.565Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":280}
{"timestamp":"2025-09-07T09:23:16.567Z","level":"INFO","category":"REDIS","message":"Subscribed to Redis keyevent expired notifications (DB 0)","file":"main.go","line":42}
{"timestamp":"2025-09-07T09:23:16.567Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":294}
{"timestamp":"2025-09-07T09:23:16.567Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":285}
{"timestamp":"2025-09-07T09:23:25.469Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:23:25.469Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:23:25.469Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:23:25.469Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:23:25.469Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:23:25.469Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:23:25.568Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: c88439e2-d6f4-442f-a26c-99c7a87e5788","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:23:25.568Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:23:25.568Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:23:25.568Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:23:25.624Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:23:25.624Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:23:28.648Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T09:23:28.648Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T09:23:28.682Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T09:23:28.683Z","level":"INFO","category":"ORDER","message":"Placing order: c88439e2-d6f4-442f-a26c-99c7a87e5788 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T09:23:28.683Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T09:23:28.768Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T09:23:29.778Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: c88439e2-d6f4-442f-a26c-99c7a87e5788","file":"service.go","line":426}
{"timestamp":"2025-09-07T09:23:29.778Z","level":"INFO","category":"ORDER","message":"Order c88439e2-d6f4-442f-a26c-99c7a87e5788 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T09:23:29.778Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T09:23:29.881Z","level":"INFO","category":"TICKET","message":"Created ticket 4e8686b6-53df-40de-aac7-3e26a1db12e2 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:23:29.975Z","level":"INFO","category":"TICKET","message":"Created ticket 1d6eafc8-eb0e-4e02-85f4-c921b9c0b543 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:23:30.141Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T09:23:30.141Z","level":"INFO","category":"ORDER","message":"Order c88439e2-d6f4-442f-a26c-99c7a87e5788 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T09:23:30.141Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T09:23:36.439Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:23:36.440Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:23:36.440Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:23:36.440Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:23:36.440Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:23:36.440Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:23:36.551Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: f9f04cb0-677b-4a53-8067-f0ccb8633895","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:23:36.551Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:23:36.551Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:23:36.551Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:23:36.599Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:23:36.599Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:23:36.600Z","level":"WARN","category":"REDIS","message":"One or more seats already locked","file":"service.go","line":285}
{"timestamp":"2025-09-07T09:23:36.600Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: one or more seats already locked","file":"handler.go","line":271}
{"timestamp":"2025-09-07T09:36:20.710Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:36:20.710Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:36:20.710Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:36:20.710Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:36:20.710Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:36:20.710Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:36:20.991Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 5278dcb9-4e2e-461c-9fb4-3dec469ed2bf","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:36:20.991Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:36:20.991Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:36:20.991Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:36:21.032Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:36:21.032Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:36:23.045Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T09:36:23.045Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T09:36:23.078Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T09:36:23.079Z","level":"INFO","category":"ORDER","message":"Placing order: 5278dcb9-4e2e-461c-9fb4-3dec469ed2bf for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T09:36:23.079Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T09:36:23.169Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T09:36:24.175Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 5278dcb9-4e2e-461c-9fb4-3dec469ed2bf","file":"service.go","line":426}
{"timestamp":"2025-09-07T09:36:24.175Z","level":"INFO","category":"ORDER","message":"Order 5278dcb9-4e2e-461c-9fb4-3dec469ed2bf placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T09:36:24.175Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T09:36:24.291Z","level":"INFO","category":"TICKET","message":"Created ticket 59179bf9-86cd-4d68-9e25-a74d95361d4f for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:36:24.390Z","level":"INFO","category":"TICKET","message":"Created ticket 9422f744-1608-457c-aedd-6ceebd1de469 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:36:24.495Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T09:36:24.495Z","level":"INFO","category":"ORDER","message":"Order 5278dcb9-4e2e-461c-9fb4-3dec469ed2bf completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T09:36:24.496Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T09:39:36.005Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:39:36.005Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:39:36.005Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:39:36.005Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:39:36.005Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:39:36.006Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:39:36.309Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: e7460d61-ae14-4287-ab97-73a242dc6dca","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:39:36.310Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:39:36.310Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:39:36.310Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:39:36.347Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:39:36.347Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:39:36.347Z","level":"WARN","category":"REDIS","message":"One or more seats already locked","file":"service.go","line":285}
{"timestamp":"2025-09-07T09:39:36.347Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: one or more seats already locked","file":"handler.go","line":271}
{"timestamp":"2025-09-07T09:40:08.521Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:40:08.521Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:40:08.521Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:40:08.521Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:40:08.521Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:40:08.521Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:40:08.624Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 1f96413c-4f3b-4db9-99d9-3f32ae59bb31","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:40:08.624Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:40:08.624Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:40:08.624Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:40:08.663Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:40:08.663Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:40:08.664Z","level":"WARN","category":"REDIS","message":"One or more seats already locked","file":"service.go","line":285}
{"timestamp":"2025-09-07T09:40:08.664Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: one or more seats already locked","file":"handler.go","line":271}
{"timestamp":"2025-09-07T09:40:51.551Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:40:51.551Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:40:51.551Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:40:51.551Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:40:51.551Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:40:51.551Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:40:51.636Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 17572589-02fb-4558-8668-914827bcf33d","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:40:51.636Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:40:51.636Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:40:51.636Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:40:51.675Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:40:51.675Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:40:51.676Z","level":"WARN","category":"REDIS","message":"One or more seats already locked","file":"service.go","line":285}
{"timestamp":"2025-09-07T09:40:51.676Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: one or more seats already locked","file":"handler.go","line":271}
{"timestamp":"2025-09-07T09:46:20.511Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":297}
{"timestamp":"2025-09-07T09:46:20.511Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":304}
{"timestamp":"2025-09-07T09:46:20.512Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":189}
{"timestamp":"2025-09-07T09:46:20.512Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":185}
{"timestamp":"2025-09-07T09:46:20.512Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T09:46:32.361Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T09:46:32.362Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T09:46:32.362Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":166}
{"timestamp":"2025-09-07T09:46:32.362Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":172}
{"timestamp":"2025-09-07T09:46:32.362Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":180}
{"timestamp":"2025-09-07T09:46:32.362Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":109}
{"timestamp":"2025-09-07T09:46:33.251Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":133}
{"timestamp":"2025-09-07T09:46:33.256Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful","file":"main.go","line":149}
{"timestamp":"2025-09-07T09:46:33.256Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":192}
{"timestamp":"2025-09-07T09:46:33.256Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":195}
{"timestamp":"2025-09-07T09:46:33.256Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":197}
{"timestamp":"2025-09-07T09:46:33.256Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":199}
{"timestamp":"2025-09-07T09:46:33.256Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":202}
{"timestamp":"2025-09-07T09:46:34.283Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":215}
{"timestamp":"2025-09-07T09:46:34.283Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":218}
{"timestamp":"2025-09-07T09:46:34.283Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":221}
{"timestamp":"2025-09-07T09:46:34.283Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T09:46:34.284Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T09:46:34.284Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":240}
{"timestamp":"2025-09-07T09:46:34.582Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":246}
{"timestamp":"2025-09-07T09:46:34.582Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":260}
{"timestamp":"2025-09-07T09:46:34.582Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":270}
{"timestamp":"2025-09-07T09:46:34.582Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":280}
{"timestamp":"2025-09-07T09:46:34.584Z","level":"INFO","category":"REDIS","message":"Subscribed to Redis keyevent expired notifications (DB 0)","file":"main.go","line":42}
{"timestamp":"2025-09-07T09:46:34.584Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":294}
{"timestamp":"2025-09-07T09:46:34.584Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":285}
{"timestamp":"2025-09-07T09:46:55.944Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:46:55.945Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:46:55.945Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:46:55.945Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:46:55.945Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:46:55.945Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:46:56.046Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 9cb983b5-36d4-45b0-a890-66f922c4a680","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:46:56.046Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:46:56.046Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:46:56.046Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:46:56.094Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:46:56.095Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:46:59.112Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T09:46:59.113Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T09:46:59.142Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T09:46:59.143Z","level":"INFO","category":"ORDER","message":"Placing order: 9cb983b5-36d4-45b0-a890-66f922c4a680 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T09:46:59.143Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T09:46:59.254Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T09:47:00.263Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 9cb983b5-36d4-45b0-a890-66f922c4a680","file":"service.go","line":426}
{"timestamp":"2025-09-07T09:47:00.263Z","level":"INFO","category":"ORDER","message":"Order 9cb983b5-36d4-45b0-a890-66f922c4a680 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T09:47:00.263Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T09:47:00.365Z","level":"INFO","category":"TICKET","message":"Created ticket a3495336-87b1-4ae4-91b2-35ba2a4d6e6c for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:47:00.455Z","level":"INFO","category":"TICKET","message":"Created ticket 8b35e78c-6b59-4cff-a0ef-6d3eee732e50 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:47:00.536Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T09:47:00.536Z","level":"INFO","category":"ORDER","message":"Order 9cb983b5-36d4-45b0-a890-66f922c4a680 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T09:47:00.536Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T09:53:52.918Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T09:53:52.918Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T09:53:52.918Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T09:53:52.918Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T09:53:52.918Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T09:53:52.919Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T09:53:53.216Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 42a8d2ff-5a28-4b83-9614-23fe491baec6","file":"service.go","line":228}
{"timestamp":"2025-09-07T09:53:53.216Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T09:53:53.216Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T09:53:53.216Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T09:53:53.256Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T09:53:53.256Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T09:53:55.265Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T09:53:55.265Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T09:53:55.297Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T09:53:55.297Z","level":"INFO","category":"ORDER","message":"Placing order: 42a8d2ff-5a28-4b83-9614-23fe491baec6 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T09:53:55.297Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T09:53:55.394Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T09:53:56.397Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 42a8d2ff-5a28-4b83-9614-23fe491baec6","file":"service.go","line":426}
{"timestamp":"2025-09-07T09:53:56.398Z","level":"INFO","category":"ORDER","message":"Order 42a8d2ff-5a28-4b83-9614-23fe491baec6 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T09:53:56.398Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T09:53:56.518Z","level":"INFO","category":"TICKET","message":"Created ticket 4ce10690-4356-4b71-bf1d-8dcd1f873cce for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:53:56.637Z","level":"INFO","category":"TICKET","message":"Created ticket a88da084-0499-44fb-9f0f-322de39f0e01 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T09:53:56.724Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T09:53:56.726Z","level":"INFO","category":"ORDER","message":"Order 42a8d2ff-5a28-4b83-9614-23fe491baec6 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T09:53:56.726Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:05:50.865Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":297}
{"timestamp":"2025-09-07T10:05:50.865Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":304}
{"timestamp":"2025-09-07T10:05:50.865Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":189}
{"timestamp":"2025-09-07T10:05:50.866Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":185}
{"timestamp":"2025-09-07T10:05:50.866Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T10:05:57.343Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:05:57.343Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:05:57.343Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":166}
{"timestamp":"2025-09-07T10:05:57.344Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":172}
{"timestamp":"2025-09-07T10:05:57.344Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":180}
{"timestamp":"2025-09-07T10:05:57.344Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":109}
{"timestamp":"2025-09-07T10:05:58.165Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":133}
{"timestamp":"2025-09-07T10:05:58.168Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful","file":"main.go","line":149}
{"timestamp":"2025-09-07T10:05:58.169Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":192}
{"timestamp":"2025-09-07T10:05:58.169Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":195}
{"timestamp":"2025-09-07T10:05:58.169Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":197}
{"timestamp":"2025-09-07T10:05:58.169Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":199}
{"timestamp":"2025-09-07T10:05:58.170Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":202}
{"timestamp":"2025-09-07T10:05:59.191Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":215}
{"timestamp":"2025-09-07T10:05:59.191Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":218}
{"timestamp":"2025-09-07T10:05:59.191Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":221}
{"timestamp":"2025-09-07T10:05:59.192Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:05:59.192Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:05:59.192Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":240}
{"timestamp":"2025-09-07T10:05:59.485Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":246}
{"timestamp":"2025-09-07T10:05:59.485Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":260}
{"timestamp":"2025-09-07T10:05:59.485Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":270}
{"timestamp":"2025-09-07T10:05:59.486Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":280}
{"timestamp":"2025-09-07T10:05:59.487Z","level":"INFO","category":"REDIS","message":"Subscribed to Redis keyevent expired notifications (DB 0)","file":"main.go","line":42}
{"timestamp":"2025-09-07T10:05:59.487Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":294}
{"timestamp":"2025-09-07T10:05:59.487Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":285}
{"timestamp":"2025-09-07T10:06:07.332Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:06:07.332Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:06:07.332Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:06:07.332Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:06:07.333Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:06:07.333Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:06:07.441Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: b0b0f9a7-f370-4fd1-bb86-af6d4fae9b25","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:06:07.441Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:06:07.441Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:06:07.441Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:06:07.484Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:06:07.484Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:06:10.504Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T10:06:10.504Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T10:06:10.532Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T10:06:10.533Z","level":"INFO","category":"ORDER","message":"Placing order: b0b0f9a7-f370-4fd1-bb86-af6d4fae9b25 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T10:06:10.533Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T10:06:10.642Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T10:06:11.651Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: b0b0f9a7-f370-4fd1-bb86-af6d4fae9b25","file":"service.go","line":426}
{"timestamp":"2025-09-07T10:06:11.651Z","level":"INFO","category":"ORDER","message":"Order b0b0f9a7-f370-4fd1-bb86-af6d4fae9b25 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T10:06:11.651Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T10:06:11.763Z","level":"INFO","category":"TICKET","message":"Created ticket de0b4f80-85b9-46fe-89c4-cfcb3a0381ce for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:06:11.877Z","level":"INFO","category":"TICKET","message":"Created ticket 43048727-8e10-46e4-8160-37ad72fd3414 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:06:11.969Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T10:06:11.969Z","level":"INFO","category":"ORDER","message":"Order b0b0f9a7-f370-4fd1-bb86-af6d4fae9b25 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T10:06:11.969Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:16:58.374Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":297}
{"timestamp":"2025-09-07T10:16:58.374Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":304}
{"timestamp":"2025-09-07T10:16:58.374Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":189}
{"timestamp":"2025-09-07T10:16:58.375Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":185}
{"timestamp":"2025-09-07T10:16:58.375Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T10:18:10.147Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:18:10.148Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:18:10.148Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":198}
{"timestamp":"2025-09-07T10:18:10.148Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":204}
{"timestamp":"2025-09-07T10:18:10.148Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":212}
{"timestamp":"2025-09-07T10:18:10.149Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:18:11.036Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":158}
{"timestamp":"2025-09-07T10:18:11.045Z","level":"INFO","category":"REDIS","message":"Keyspace notifications enabled for expired events","file":"main.go","line":179}
{"timestamp":"2025-09-07T10:18:11.045Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful to localhost:6379 (DB: 0)","file":"main.go","line":181}
{"timestamp":"2025-09-07T10:18:11.045Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":224}
{"timestamp":"2025-09-07T10:18:11.045Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":227}
{"timestamp":"2025-09-07T10:18:11.045Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":229}
{"timestamp":"2025-09-07T10:18:11.046Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":231}
{"timestamp":"2025-09-07T10:18:11.046Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":234}
{"timestamp":"2025-09-07T10:18:12.062Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":247}
{"timestamp":"2025-09-07T10:18:12.062Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":250}
{"timestamp":"2025-09-07T10:18:12.063Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":253}
{"timestamp":"2025-09-07T10:18:12.063Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:18:12.064Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:18:12.064Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":272}
{"timestamp":"2025-09-07T10:18:12.373Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":278}
{"timestamp":"2025-09-07T10:18:12.373Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":292}
{"timestamp":"2025-09-07T10:18:12.373Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":302}
{"timestamp":"2025-09-07T10:18:12.373Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":312}
{"timestamp":"2025-09-07T10:18:12.376Z","level":"INFO","category":"REDIS","message":"Current keyspace notifications setting: [notify-keyspace-events xE]","file":"main.go","line":48}
{"timestamp":"2025-09-07T10:18:12.377Z","level":"INFO","category":"REDIS","message":"Subscribed to Redis keyevent expired notifications (DB 0)","file":"main.go","line":55}
{"timestamp":"2025-09-07T10:18:12.377Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":326}
{"timestamp":"2025-09-07T10:18:12.377Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":317}
{"timestamp":"2025-09-07T10:18:14.377Z","level":"INFO","category":"REDIS","message":"Setting test key test_seat_lock_subscription with 3s expiry to verify subscription","file":"main.go","line":61}
{"timestamp":"2025-09-07T10:18:17.584Z","level":"INFO","category":"REDIS","message":"Received expired key event: test_seat_lock_subscription","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:18:20.903Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:18:20.904Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:18:20.904Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:18:20.904Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:18:20.904Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:18:20.904Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:18:20.991Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 14297db8-2b1e-410a-a80b-96c60f95abd2","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:18:20.991Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:18:20.992Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:18:20.992Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:18:21.040Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:18:21.040Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:18:24.058Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T10:18:24.058Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T10:18:24.097Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T10:18:24.097Z","level":"INFO","category":"ORDER","message":"Placing order: 14297db8-2b1e-410a-a80b-96c60f95abd2 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T10:18:24.097Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T10:18:24.193Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T10:18:25.203Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 14297db8-2b1e-410a-a80b-96c60f95abd2","file":"service.go","line":426}
{"timestamp":"2025-09-07T10:18:25.203Z","level":"INFO","category":"ORDER","message":"Order 14297db8-2b1e-410a-a80b-96c60f95abd2 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T10:18:25.203Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T10:18:25.312Z","level":"INFO","category":"TICKET","message":"Created ticket 2dd0301a-f629-4fe0-8c62-00788e36448b for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:18:25.448Z","level":"INFO","category":"TICKET","message":"Created ticket b55090a8-9671-417a-9492-314ffb145af0 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:18:25.535Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T10:18:25.535Z","level":"INFO","category":"ORDER","message":"Order 14297db8-2b1e-410a-a80b-96c60f95abd2 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T10:18:25.535Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:18:31.476Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:18:31.476Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:18:31.476Z","level":"ERROR","category":"SEAT_UNLOCK","message":"Failed to get session ID for seat f01a609a-a4c6-46d6-b435-68b28f376b00: bun: Model(unsupported *string)","file":"main.go","line":78}
{"timestamp":"2025-09-07T10:18:33.446Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:18:33.446Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:18:33.446Z","level":"ERROR","category":"SEAT_UNLOCK","message":"Failed to get session ID for seat 97fcd847-0780-4076-8ab9-04b07f74ef95: bun: Model(unsupported *string)","file":"main.go","line":78}
{"timestamp":"2025-09-07T10:20:52.468Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":329}
{"timestamp":"2025-09-07T10:20:52.469Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":336}
{"timestamp":"2025-09-07T10:20:52.469Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":221}
{"timestamp":"2025-09-07T10:20:52.470Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":217}
{"timestamp":"2025-09-07T10:20:52.470Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T10:20:57.048Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:20:57.048Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:20:57.048Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":198}
{"timestamp":"2025-09-07T10:20:57.048Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":204}
{"timestamp":"2025-09-07T10:20:57.048Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":212}
{"timestamp":"2025-09-07T10:20:57.048Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:20:57.989Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":158}
{"timestamp":"2025-09-07T10:20:57.993Z","level":"INFO","category":"REDIS","message":"Keyspace notifications enabled for expired events","file":"main.go","line":179}
{"timestamp":"2025-09-07T10:20:57.994Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful to localhost:6379 (DB: 0)","file":"main.go","line":181}
{"timestamp":"2025-09-07T10:20:57.994Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":224}
{"timestamp":"2025-09-07T10:20:57.994Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":227}
{"timestamp":"2025-09-07T10:20:57.994Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":229}
{"timestamp":"2025-09-07T10:20:57.994Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":231}
{"timestamp":"2025-09-07T10:20:57.994Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":234}
{"timestamp":"2025-09-07T10:20:59.008Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":247}
{"timestamp":"2025-09-07T10:20:59.008Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":250}
{"timestamp":"2025-09-07T10:20:59.008Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":253}
{"timestamp":"2025-09-07T10:20:59.008Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:20:59.008Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:20:59.008Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":272}
{"timestamp":"2025-09-07T10:20:59.334Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":278}
{"timestamp":"2025-09-07T10:20:59.335Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":292}
{"timestamp":"2025-09-07T10:20:59.335Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":302}
{"timestamp":"2025-09-07T10:20:59.336Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":312}
{"timestamp":"2025-09-07T10:20:59.336Z","level":"INFO","category":"REDIS","message":"Current keyspace notifications setting: [notify-keyspace-events xE]","file":"main.go","line":48}
{"timestamp":"2025-09-07T10:20:59.337Z","level":"INFO","category":"REDIS","message":"Subscribed to Redis keyevent expired notifications (DB 0)","file":"main.go","line":55}
{"timestamp":"2025-09-07T10:20:59.338Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":326}
{"timestamp":"2025-09-07T10:20:59.338Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":317}
{"timestamp":"2025-09-07T10:21:01.338Z","level":"INFO","category":"REDIS","message":"Setting test key test_seat_lock_subscription with 3s expiry to verify subscription","file":"main.go","line":61}
{"timestamp":"2025-09-07T10:21:04.520Z","level":"INFO","category":"REDIS","message":"Received expired key event: test_seat_lock_subscription","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:21:06.243Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:21:06.243Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:21:06.243Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:21:06.243Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:21:06.243Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:21:06.244Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:21:06.337Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 0473eb40-fee0-4bab-9eee-36e28dbdfe09","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:21:06.337Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:21:06.337Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:21:06.337Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:21:06.383Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:21:06.383Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:21:09.407Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T10:21:09.407Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T10:21:09.451Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T10:21:09.451Z","level":"INFO","category":"ORDER","message":"Placing order: 0473eb40-fee0-4bab-9eee-36e28dbdfe09 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T10:21:09.452Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T10:21:09.551Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T10:21:10.563Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 0473eb40-fee0-4bab-9eee-36e28dbdfe09","file":"service.go","line":426}
{"timestamp":"2025-09-07T10:21:10.563Z","level":"INFO","category":"ORDER","message":"Order 0473eb40-fee0-4bab-9eee-36e28dbdfe09 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T10:21:10.563Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T10:21:10.679Z","level":"INFO","category":"TICKET","message":"Created ticket 38509717-14db-4612-b86c-8c8552c3b764 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:21:10.811Z","level":"INFO","category":"TICKET","message":"Created ticket 8eb73259-6784-488c-bf55-12735febd031 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:21:10.898Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T10:21:10.898Z","level":"INFO","category":"ORDER","message":"Order 0473eb40-fee0-4bab-9eee-36e28dbdfe09 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T10:21:10.898Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:21:15.823Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:21:15.823Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:21:16.964Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:21:17.688Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:21:17.688Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:21:18.791Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:36:41.649Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":329}
{"timestamp":"2025-09-07T10:36:41.839Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":336}
{"timestamp":"2025-09-07T10:36:41.868Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":221}
{"timestamp":"2025-09-07T10:36:41.951Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":217}
{"timestamp":"2025-09-07T10:36:41.952Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T10:36:47.823Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:36:47.823Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:36:47.823Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":198}
{"timestamp":"2025-09-07T10:36:47.823Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":204}
{"timestamp":"2025-09-07T10:36:47.823Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":212}
{"timestamp":"2025-09-07T10:36:47.823Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:36:47.840Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:36:49.841Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 2/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:36:49.847Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:36:51.847Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 3/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:36:51.848Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:36:53.849Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 4/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:36:53.857Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:36:58.246Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:36:58.247Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:36:58.247Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":198}
{"timestamp":"2025-09-07T10:36:58.247Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":204}
{"timestamp":"2025-09-07T10:36:58.247Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":212}
{"timestamp":"2025-09-07T10:36:58.248Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:36:58.315Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:37:00.316Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 2/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:37:00.317Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:37:13.523Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:37:13.523Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:37:13.523Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":198}
{"timestamp":"2025-09-07T10:37:13.524Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":204}
{"timestamp":"2025-09-07T10:37:13.524Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":212}
{"timestamp":"2025-09-07T10:37:13.524Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:37:13.537Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:37:15.537Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 2/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:37:15.538Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:37:17.538Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 3/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:37:17.539Z","level":"ERROR","category":"DATABASE","message":"Failed to connect to PostgreSQL: dial tcp: lookup ticketly-db.cp0qikwog82w.ap-south-1.rds.amazonaws.com: no such host","file":"main.go","line":147}
{"timestamp":"2025-09-07T10:37:38.364Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:37:38.364Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:37:38.364Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":198}
{"timestamp":"2025-09-07T10:37:38.364Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":204}
{"timestamp":"2025-09-07T10:37:38.364Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":212}
{"timestamp":"2025-09-07T10:37:38.364Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:37:40.557Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":158}
{"timestamp":"2025-09-07T10:37:40.565Z","level":"INFO","category":"REDIS","message":"Keyspace notifications enabled for expired events","file":"main.go","line":179}
{"timestamp":"2025-09-07T10:37:40.565Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful to localhost:6379 (DB: 0)","file":"main.go","line":181}
{"timestamp":"2025-09-07T10:37:40.565Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":224}
{"timestamp":"2025-09-07T10:37:40.565Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":227}
{"timestamp":"2025-09-07T10:37:40.565Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":229}
{"timestamp":"2025-09-07T10:37:40.565Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":231}
{"timestamp":"2025-09-07T10:37:40.565Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":234}
{"timestamp":"2025-09-07T10:37:41.598Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":247}
{"timestamp":"2025-09-07T10:37:41.598Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":250}
{"timestamp":"2025-09-07T10:37:41.599Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":253}
{"timestamp":"2025-09-07T10:37:41.599Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:37:41.599Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:37:41.600Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":272}
{"timestamp":"2025-09-07T10:37:41.926Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":278}
{"timestamp":"2025-09-07T10:37:41.926Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":292}
{"timestamp":"2025-09-07T10:37:41.927Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":302}
{"timestamp":"2025-09-07T10:37:41.927Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":312}
{"timestamp":"2025-09-07T10:37:41.928Z","level":"INFO","category":"REDIS","message":"Current keyspace notifications setting: [notify-keyspace-events xE]","file":"main.go","line":48}
{"timestamp":"2025-09-07T10:37:41.929Z","level":"INFO","category":"REDIS","message":"Subscribed to Redis keyevent expired notifications (DB 0)","file":"main.go","line":55}
{"timestamp":"2025-09-07T10:37:41.929Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":326}
{"timestamp":"2025-09-07T10:37:41.929Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":317}
{"timestamp":"2025-09-07T10:37:43.930Z","level":"INFO","category":"REDIS","message":"Setting test key test_seat_lock_subscription with 3s expiry to verify subscription","file":"main.go","line":61}
{"timestamp":"2025-09-07T10:37:47.080Z","level":"INFO","category":"REDIS","message":"Received expired key event: test_seat_lock_subscription","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:37:57.764Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:37:57.765Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:37:57.765Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:37:57.765Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:37:57.765Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:37:57.765Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:37:57.853Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: f2428b3a-3062-4ccd-867d-46acccdb9ce4","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:37:57.854Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:37:57.854Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:37:57.854Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:37:58.327Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:37:58.327Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:38:01.351Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T10:38:01.352Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T10:38:01.424Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T10:38:01.424Z","level":"INFO","category":"ORDER","message":"Placing order: f2428b3a-3062-4ccd-867d-46acccdb9ce4 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T10:38:01.424Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T10:38:01.655Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T10:38:02.667Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: f2428b3a-3062-4ccd-867d-46acccdb9ce4","file":"service.go","line":426}
{"timestamp":"2025-09-07T10:38:02.667Z","level":"INFO","category":"ORDER","message":"Order f2428b3a-3062-4ccd-867d-46acccdb9ce4 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T10:38:02.667Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T10:38:02.922Z","level":"INFO","category":"TICKET","message":"Created ticket 8ccf4b23-8ed6-444f-9796-e81f91780f42 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:38:03.172Z","level":"INFO","category":"TICKET","message":"Created ticket e602f1cd-4fb7-4825-9a19-d56adc521458 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:38:03.421Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T10:38:03.422Z","level":"INFO","category":"ORDER","message":"Order f2428b3a-3062-4ccd-867d-46acccdb9ce4 completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T10:38:03.423Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:38:08.778Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:38:08.778Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:38:10.117Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:38:10.752Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:38:10.752Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:38:11.985Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:39:28.968Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:39:28.979Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:39:28.980Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [97fcd847-0780-4076-8ab9-04b07f74ef95 f197510c-a9ec-4bb7-9e51-55c2e9117164]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:39:28.980Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:39:28.980Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[97fcd847-0780-4076-8ab9-04b07f74ef95 f197510c-a9ec-4bb7-9e51-55c2e9117164]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:39:28.980Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:39:29.307Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 3f1d624c-756f-40c4-9047-9dc0bee6cf89","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:39:29.307Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:39:29.307Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:39:29.307Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"97fcd847-0780-4076-8ab9-04b07f74ef95\",\"f197510c-a9ec-4bb7-9e51-55c2e9117164\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:39:29.368Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:39:29.368Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:39:31.375Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T10:39:31.375Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T10:39:31.433Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T10:39:31.433Z","level":"INFO","category":"ORDER","message":"Placing order: 3f1d624c-756f-40c4-9047-9dc0bee6cf89 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T10:39:31.434Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T10:39:31.669Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T10:39:32.671Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 3f1d624c-756f-40c4-9047-9dc0bee6cf89","file":"service.go","line":426}
{"timestamp":"2025-09-07T10:39:32.671Z","level":"INFO","category":"ORDER","message":"Order 3f1d624c-756f-40c4-9047-9dc0bee6cf89 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T10:39:32.671Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T10:39:32.915Z","level":"INFO","category":"TICKET","message":"Created ticket 43ba7516-0818-4a07-9df1-7042d63c7400 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:39:33.152Z","level":"INFO","category":"TICKET","message":"Created ticket 908ce723-fbdc-4ce7-9a54-b7feb9567335 for seat f197510c-a9ec-4bb7-9e51-55c2e9117164","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:39:33.383Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T10:39:33.383Z","level":"INFO","category":"ORDER","message":"Order 3f1d624c-756f-40c4-9047-9dc0bee6cf89 completed successfully for user 70073c30-1a6f-4768-b2ee-80d7ee9e6700","file":"service.go","line":405}
{"timestamp":"2025-09-07T10:39:33.383Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:39:39.775Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:39:39.775Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:39:41.000Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:39:41.001Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:f197510c-a9ec-4bb7-9e51-55c2e9117164","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:39:41.001Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: f197510c-a9ec-4bb7-9e51-55c2e9117164","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:39:42.231Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: f197510c-a9ec-4bb7-9e51-55c2e9117164","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:40:36.427Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":329}
{"timestamp":"2025-09-07T10:40:36.427Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":336}
{"timestamp":"2025-09-07T10:40:36.428Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":221}
{"timestamp":"2025-09-07T10:40:36.428Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":217}
{"timestamp":"2025-09-07T10:40:36.428Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
{"timestamp":"2025-09-07T10:40:40.784Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:40:40.785Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:40:40.785Z","level":"INFO","category":"APP","message":"Starting Order Service initialization","file":"main.go","line":198}
{"timestamp":"2025-09-07T10:40:40.785Z","level":"INFO","category":"CONFIG","message":"Loaded environment variables from .env file","file":"main.go","line":204}
{"timestamp":"2025-09-07T10:40:40.785Z","level":"INFO","category":"APP","message":"Verifying database connections","file":"main.go","line":212}
{"timestamp":"2025-09-07T10:40:40.785Z","level":"INFO","category":"DATABASE","message":"Attempting to connect to PostgreSQL (attempt 1/5)","file":"main.go","line":134}
{"timestamp":"2025-09-07T10:40:41.733Z","level":"INFO","category":"DATABASE","message":"âœ… PostgreSQL connection successful","file":"main.go","line":158}
{"timestamp":"2025-09-07T10:40:41.736Z","level":"INFO","category":"REDIS","message":"Keyspace notifications enabled for expired events","file":"main.go","line":179}
{"timestamp":"2025-09-07T10:40:41.737Z","level":"INFO","category":"DATABASE","message":"âœ… Redis connection successful to localhost:6379 (DB: 0)","file":"main.go","line":181}
{"timestamp":"2025-09-07T10:40:41.737Z","level":"INFO","category":"KAFKA","message":"Initializing Kafka producer","file":"main.go","line":224}
{"timestamp":"2025-09-07T10:40:41.737Z","level":"INFO","category":"KAFKA","message":"Using Kafka address from environment variable: localhost:9092","file":"main.go","line":227}
{"timestamp":"2025-09-07T10:40:41.738Z","level":"INFO","category":"KAFKA","message":"Kafka brokers configured: [localhost:9092]","file":"main.go","line":229}
{"timestamp":"2025-09-07T10:40:41.738Z","level":"INFO","category":"KAFKA","message":"Kafka producer initialized successfully","file":"main.go","line":231}
{"timestamp":"2025-09-07T10:40:41.738Z","level":"INFO","category":"KAFKA","message":"Ensuring required topics exist","file":"main.go","line":234}
{"timestamp":"2025-09-07T10:40:42.757Z","level":"INFO","category":"KAFKA","message":"Required topics ensured successfully","file":"main.go","line":247}
{"timestamp":"2025-09-07T10:40:42.757Z","level":"INFO","category":"SERVICE","message":"Initializing ticket service","file":"main.go","line":250}
{"timestamp":"2025-09-07T10:40:42.757Z","level":"INFO","category":"SERVICE","message":"Initializing order service","file":"main.go","line":253}
{"timestamp":"2025-09-07T10:40:42.758Z","level":"INFO","category":"LOGGER","message":"Enhanced logging system initialized","file":"logger.go","line":68}
{"timestamp":"2025-09-07T10:40:42.758Z","level":"INFO","category":"LOGGER","message":"Log file: logs/order-gateway-2025-09-07.log","file":"logger.go","line":69}
{"timestamp":"2025-09-07T10:40:42.758Z","level":"INFO","category":"HTTP","message":"Setting up router and middleware","file":"main.go","line":272}
{"timestamp":"2025-09-07T10:40:43.064Z","level":"INFO","category":"AUTH","message":"JWT middleware applied globally","file":"main.go","line":278}
{"timestamp":"2025-09-07T10:40:43.064Z","level":"INFO","category":"ROUTER","message":"Order routes registered under /api/order","file":"main.go","line":292}
{"timestamp":"2025-09-07T10:40:43.065Z","level":"INFO","category":"ROUTER","message":"Ticket routes registered under /api/order/ticket","file":"main.go","line":302}
{"timestamp":"2025-09-07T10:40:43.065Z","level":"INFO","category":"REDIS","message":"Starting seat unlock subscription","file":"main.go","line":312}
{"timestamp":"2025-09-07T10:40:43.065Z","level":"INFO","category":"REDIS","message":"Current keyspace notifications setting: [notify-keyspace-events xE]","file":"main.go","line":48}
{"timestamp":"2025-09-07T10:40:43.067Z","level":"INFO","category":"REDIS","message":"Subscribed to Redis keyevent expired notifications (DB 0)","file":"main.go","line":55}
{"timestamp":"2025-09-07T10:40:43.067Z","level":"INFO","category":"APP","message":"Service started successfully, waiting for shutdown signal","file":"main.go","line":326}
{"timestamp":"2025-09-07T10:40:43.067Z","level":"INFO","category":"HTTP","message":"ðŸš€ Order Service running on :8084","file":"main.go","line":317}
{"timestamp":"2025-09-07T10:40:45.067Z","level":"INFO","category":"REDIS","message":"Setting test key test_seat_lock_subscription with 3s expiry to verify subscription","file":"main.go","line":61}
{"timestamp":"2025-09-07T10:40:48.233Z","level":"INFO","category":"REDIS","message":"Received expired key event: test_seat_lock_subscription","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:40:51.489Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:40:51.489Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:40:51.489Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:40:51.491Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:40:51.491Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:40:51.491Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:40:51.588Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 94776f10-6ee6-42ae-ac7d-ad3100b746be","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:40:51.588Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:40:51.588Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:40:51.588Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:40:51.831Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:40:51.831Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:40:54.901Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T10:40:54.901Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T10:40:55.076Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T10:40:55.076Z","level":"INFO","category":"ORDER","message":"Placing order: 94776f10-6ee6-42ae-ac7d-ad3100b746be for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T10:40:55.076Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T10:40:55.185Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T10:40:56.208Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: 94776f10-6ee6-42ae-ac7d-ad3100b746be","file":"service.go","line":426}
{"timestamp":"2025-09-07T10:40:56.208Z","level":"INFO","category":"ORDER","message":"Order 94776f10-6ee6-42ae-ac7d-ad3100b746be placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T10:40:56.208Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T10:40:56.313Z","level":"INFO","category":"TICKET","message":"Created ticket 15dfacdb-08b9-4f1c-9ad9-2ae3ae3a67a9 for seat f01a609a-a4c6-46d6-b435-68b28f376b00","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:40:56.403Z","level":"INFO","category":"TICKET","message":"Created ticket 35906786-2285-4be1-a744-dc8252193725 for seat 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:40:56.483Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T10:40:56.483Z","level":"INFO","category":"ORDER","message":"Order 94776f10-6ee6-42ae-ac7d-ad3100b746be completed successfully for user c9fc0d1d-8e81-4f49-8f65-201a4e97217f","file":"service.go","line":405}
{"timestamp":"2025-09-07T10:40:56.483Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:41:38.323Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:41:38.323Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:41:38.323Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:41:38.323Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:41:38.324Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[f01a609a-a4c6-46d6-b435-68b28f376b00 97fcd847-0780-4076-8ab9-04b07f74ef95]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:41:38.324Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:41:38.414Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: 262680c6-23e1-4837-bb26-905b9aac6da6","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:41:38.414Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:41:38.414Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:41:38.414Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"f01a609a-a4c6-46d6-b435-68b28f376b00\",\"97fcd847-0780-4076-8ab9-04b07f74ef95\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:41:38.478Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:41:38.478Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:41:38.479Z","level":"WARN","category":"REDIS","message":"One or more seats already locked","file":"service.go","line":285}
{"timestamp":"2025-09-07T10:41:38.479Z","level":"ERROR","category":"API","message":"SeatValidationAndPlaceOrder: seat validation failed: one or more seats already locked","file":"handler.go","line":271}
{"timestamp":"2025-09-07T10:41:51.791Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:41:51.791Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:41:52.905Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: f01a609a-a4c6-46d6-b435-68b28f376b00","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:41:53.865Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:41:53.865Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:41:54.969Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: 97fcd847-0780-4076-8ab9-04b07f74ef95","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:42:05.922Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: received request","file":"handler.go","line":254}
{"timestamp":"2025-09-07T10:42:05.923Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SessionID: de5eda14-518d-4594-aa6e-794e78213683","file":"handler.go","line":265}
{"timestamp":"2025-09-07T10:42:05.924Z","level":"DEBUG","category":"API","message":"SeatValidationAndPlaceOrder: SeatIDs: [2226fe26-72a2-448c-9a8a-ad6198e4daf7 6936e56f-95e7-4e32-9560-b94f1f778f33]","file":"handler.go","line":266}
{"timestamp":"2025-09-07T10:42:05.924Z","level":"INFO","category":"ORDER","message":"Starting seat validation and order placement process","file":"service.go","line":196}
{"timestamp":"2025-09-07T10:42:05.924Z","level":"DEBUG","category":"ORDER","message":"Order request: {SessionID:de5eda14-518d-4594-aa6e-794e78213683 EventID:0ee7cb74-356b-4a9a-bef3-277ddb1dc602 SeatIDs:[2226fe26-72a2-448c-9a8a-ad6198e4daf7 6936e56f-95e7-4e32-9560-b94f1f778f33]}","file":"service.go","line":211}
{"timestamp":"2025-09-07T10:42:05.925Z","level":"DEBUG","category":"AUTH","message":"Requesting M2M token for seat validation","file":"service.go","line":219}
{"timestamp":"2025-09-07T10:42:06.037Z","level":"DEBUG","category":"ORDER","message":"Generated order ID: c4c8dc88-2862-4fa5-b42e-e1fa6f037946","file":"service.go","line":228}
{"timestamp":"2025-09-07T10:42:06.037Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Session ID: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":237}
{"timestamp":"2025-09-07T10:42:06.038Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Validation URL: http://localhost:8088/api/event-query/internal/v1/sessions/de5eda14-518d-4594-aa6e-794e78213683/seats/validate","file":"service.go","line":247}
{"timestamp":"2025-09-07T10:42:06.038Z","level":"DEBUG","category":"SEAT_VALIDATION","message":"Request body: {\"session_id\":\"de5eda14-518d-4594-aa6e-794e78213683\",\"event_id\":\"0ee7cb74-356b-4a9a-bef3-277ddb1dc602\",\"seat_ids\":[\"2226fe26-72a2-448c-9a8a-ad6198e4daf7\",\"6936e56f-95e7-4e32-9560-b94f1f778f33\"]}","file":"service.go","line":248}
{"timestamp":"2025-09-07T10:42:06.153Z","level":"INFO","category":"SEAT_VALIDATION","message":"Seat validation successful","file":"service.go","line":275}
{"timestamp":"2025-09-07T10:42:06.154Z","level":"DEBUG","category":"REDIS","message":"Attempting to lock seats in Redis","file":"service.go","line":278}
{"timestamp":"2025-09-07T10:42:08.160Z","level":"INFO","category":"REDIS","message":"Seats locked successfully","file":"service.go","line":288}
{"timestamp":"2025-09-07T10:42:08.160Z","level":"DEBUG","category":"SEAT_DETAILS","message":"Requesting seat details for ticket creation","file":"service.go","line":298}
{"timestamp":"2025-09-07T10:42:08.205Z","level":"INFO","category":"SEAT_DETAILS","message":"Retrieved details for 2 seats","file":"service.go","line":338}
{"timestamp":"2025-09-07T10:42:08.206Z","level":"INFO","category":"ORDER","message":"Placing order: c4c8dc88-2862-4fa5-b42e-e1fa6f037946 for session: de5eda14-518d-4594-aa6e-794e78213683","file":"service.go","line":69}
{"timestamp":"2025-09-07T10:42:08.206Z","level":"DEBUG","category":"ORDER","message":"Creating order in DB...","file":"service.go","line":71}
{"timestamp":"2025-09-07T10:42:08.298Z","level":"INFO","category":"KAFKA","message":"Order created successfully, publishing to Kafka...","file":"service.go","line":79}
{"timestamp":"2025-09-07T10:42:09.301Z","level":"INFO","category":"KAFKA","message":"Published order created event for order: c4c8dc88-2862-4fa5-b42e-e1fa6f037946","file":"service.go","line":426}
{"timestamp":"2025-09-07T10:42:09.301Z","level":"INFO","category":"ORDER","message":"Order c4c8dc88-2862-4fa5-b42e-e1fa6f037946 placed successfully","file":"service.go","line":84}
{"timestamp":"2025-09-07T10:42:09.301Z","level":"INFO","category":"TICKET","message":"Creating tickets for each seat","file":"service.go","line":359}
{"timestamp":"2025-09-07T10:42:09.416Z","level":"INFO","category":"TICKET","message":"Created ticket eb6d402c-6ae0-481e-9b29-cb9d29b3ce41 for seat 2226fe26-72a2-448c-9a8a-ad6198e4daf7","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:42:09.512Z","level":"INFO","category":"TICKET","message":"Created ticket 8d806f4d-30d1-4682-a17f-6374e41488c6 for seat 6936e56f-95e7-4e32-9560-b94f1f778f33","file":"service.go","line":383}
{"timestamp":"2025-09-07T10:42:09.597Z","level":"INFO","category":"ORDER","message":"Updated order price to: $2000.00","file":"service.go","line":400}
{"timestamp":"2025-09-07T10:42:09.597Z","level":"INFO","category":"ORDER","message":"Order c4c8dc88-2862-4fa5-b42e-e1fa6f037946 completed successfully for user 70073c30-1a6f-4768-b2ee-80d7ee9e6700","file":"service.go","line":405}
{"timestamp":"2025-09-07T10:42:09.597Z","level":"INFO","category":"API","message":"SeatValidationAndPlaceOrder: order created successfully","file":"handler.go","line":280}
{"timestamp":"2025-09-07T10:43:06.127Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:2226fe26-72a2-448c-9a8a-ad6198e4daf7","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:43:06.128Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: 2226fe26-72a2-448c-9a8a-ad6198e4daf7","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:43:07.234Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: 2226fe26-72a2-448c-9a8a-ad6198e4daf7","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:43:07.234Z","level":"INFO","category":"REDIS","message":"Received expired key event: seat_lock:6936e56f-95e7-4e32-9560-b94f1f778f33","file":"main.go","line":70}
{"timestamp":"2025-09-07T10:43:07.234Z","level":"INFO","category":"SEAT_UNLOCK","message":"Seat lock expired for seat: 6936e56f-95e7-4e32-9560-b94f1f778f33","file":"main.go","line":73}
{"timestamp":"2025-09-07T10:43:08.333Z","level":"INFO","category":"KAFKA","message":"Published seat unlock event for seat: 6936e56f-95e7-4e32-9560-b94f1f778f33","file":"main.go","line":112}
{"timestamp":"2025-09-07T10:47:29.268Z","level":"INFO","category":"APP","message":"Shutdown signal received, initiating graceful shutdown","file":"main.go","line":329}
{"timestamp":"2025-09-07T10:47:29.270Z","level":"INFO","category":"HTTP","message":"âœ… Order Service shutdown complete","file":"main.go","line":336}
{"timestamp":"2025-09-07T10:47:29.271Z","level":"INFO","category":"DATABASE","message":"Redis connection closed","file":"main.go","line":221}
{"timestamp":"2025-09-07T10:47:29.271Z","level":"INFO","category":"DATABASE","message":"PostgreSQL connection closed","file":"main.go","line":217}
{"timestamp":"2025-09-07T10:47:29.272Z","level":"INFO","category":"LOGGER","message":"Closing log file","file":"logger.go","line":216}
